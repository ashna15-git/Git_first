{
  "hash": "501dd74d95cfa93e072e8ee2843295df",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Assignment 2-3\"\nformat: html\neditor: visual\n---\n\n## Introduction\n\nI am examining a dataset reguarding surveys relating to Influenza vaccination\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#|label: setup\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.6\n✔ forcats   1.0.1     ✔ stringr   1.6.0\n✔ ggplot2   4.0.1     ✔ tibble    3.3.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.2\n✔ purrr     1.2.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(skimr)\nlibrary(ggformula)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: scales\n\nAttaching package: 'scales'\n\nThe following object is masked from 'package:purrr':\n\n    discard\n\nThe following object is masked from 'package:readr':\n\n    col_factor\n\nLoading required package: ggiraph\nLoading required package: ggridges\n\nNew to ggformula?  Try the tutorials: \n\tlearnr::run_tutorial(\"introduction\", package = \"ggformula\")\n\tlearnr::run_tutorial(\"refining\", package = \"ggformula\")\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(vcd)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: grid\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(vcdExtra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: gnm\nRegistered S3 method overwritten by 'vcdExtra':\n  method      from\n  print.Kappa vcd \n\nAttaching package: 'vcdExtra'\n\nThe following object is masked from 'package:vcd':\n\n    woolf_test\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(vcdExtra)\nlibrary(openintro)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: airports\nLoading required package: cherryblossom\nLoading required package: usdata\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(resampledata)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'resampledata'\n\nThe following object is masked from 'package:vcdExtra':\n\n    TV\n\nThe following object is masked from 'package:datasets':\n\n    Titanic\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggalluvial)\nlibrary(RColorBrewer)\nlibrary(paletteer)\n```\n:::\n\n\n## Loading and Inspecting the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvaccinations\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       survey freq subject  response start_date   end_date\n1   ms153_NSA   48       1    Always 2010-09-22 2010-10-25\n2   ms153_NSA    9       2    Always 2010-09-22 2010-10-25\n3   ms153_NSA   66       3    Always 2010-09-22 2010-10-25\n4   ms153_NSA    1       4    Always 2010-09-22 2010-10-25\n5   ms153_NSA   11       5    Always 2010-09-22 2010-10-25\n6   ms153_NSA    1       6    Always 2010-09-22 2010-10-25\n7   ms153_NSA    5       7    Always 2010-09-22 2010-10-25\n8   ms153_NSA    4       8    Always 2010-09-22 2010-10-25\n9   ms153_NSA   24       9   Missing 2010-09-22 2010-10-25\n10  ms153_NSA    4      10   Missing 2010-09-22 2010-10-25\n11  ms153_NSA   29      11   Missing 2010-09-22 2010-10-25\n12  ms153_NSA    1      12   Missing 2010-09-22 2010-10-25\n13  ms153_NSA    1      13   Missing 2010-09-22 2010-10-25\n14  ms153_NSA    9      14   Missing 2010-09-22 2010-10-25\n15  ms153_NSA   10      15   Missing 2010-09-22 2010-10-25\n16  ms153_NSA   14      16   Missing 2010-09-22 2010-10-25\n17  ms153_NSA    3      17     Never 2010-09-22 2010-10-25\n18  ms153_NSA    7      18     Never 2010-09-22 2010-10-25\n19  ms153_NSA   42      19     Never 2010-09-22 2010-10-25\n20  ms153_NSA   20      20     Never 2010-09-22 2010-10-25\n21  ms153_NSA    2      21     Never 2010-09-22 2010-10-25\n22  ms153_NSA   36      22     Never 2010-09-22 2010-10-25\n23  ms153_NSA    7      23     Never 2010-09-22 2010-10-25\n24  ms153_NSA    2      24     Never 2010-09-22 2010-10-25\n25  ms153_NSA    4      25     Never 2010-09-22 2010-10-25\n26  ms153_NSA    9      26     Never 2010-09-22 2010-10-25\n27  ms153_NSA   48      27 Sometimes 2010-09-22 2010-10-25\n28  ms153_NSA   11      28 Sometimes 2010-09-22 2010-10-25\n29  ms153_NSA   99      29 Sometimes 2010-09-22 2010-10-25\n30  ms153_NSA    3      30 Sometimes 2010-09-22 2010-10-25\n31  ms153_NSA   41      31 Sometimes 2010-09-22 2010-10-25\n32  ms153_NSA  168      32 Sometimes 2010-09-22 2010-10-25\n33  ms153_NSA    2      33 Sometimes 2010-09-22 2010-10-25\n34  ms153_NSA   23      34 Sometimes 2010-09-22 2010-10-25\n35  ms153_NSA   22      35 Sometimes 2010-09-22 2010-10-25\n36  ms153_NSA   38      36 Sometimes 2010-09-22 2010-10-25\n37  ms153_NSA    1      37 Sometimes 2010-09-22 2010-10-25\n38  ms153_NSA   15      38 Sometimes 2010-09-22 2010-10-25\n39  ms153_NSA  113      39 Sometimes 2010-09-22 2010-10-25\n40  ms432_NSA   48       1    Always 2015-06-04 2015-10-05\n41  ms432_NSA    9       2    Always 2015-06-04 2015-10-05\n42  ms432_NSA   66       3   Missing 2015-06-04 2015-10-05\n43  ms432_NSA    1       4   Missing 2015-06-04 2015-10-05\n44  ms432_NSA   11       5   Missing 2015-06-04 2015-10-05\n45  ms432_NSA    1       6     Never 2015-06-04 2015-10-05\n46  ms432_NSA    5       7 Sometimes 2015-06-04 2015-10-05\n47  ms432_NSA    4       8 Sometimes 2015-06-04 2015-10-05\n48  ms432_NSA   24       9    Always 2015-06-04 2015-10-05\n49  ms432_NSA    4      10    Always 2015-06-04 2015-10-05\n50  ms432_NSA   29      11   Missing 2015-06-04 2015-10-05\n51  ms432_NSA    1      12   Missing 2015-06-04 2015-10-05\n52  ms432_NSA    1      13   Missing 2015-06-04 2015-10-05\n53  ms432_NSA    9      14   Missing 2015-06-04 2015-10-05\n54  ms432_NSA   10      15 Sometimes 2015-06-04 2015-10-05\n55  ms432_NSA   14      16 Sometimes 2015-06-04 2015-10-05\n56  ms432_NSA    3      17    Always 2015-06-04 2015-10-05\n57  ms432_NSA    7      18   Missing 2015-06-04 2015-10-05\n58  ms432_NSA   42      19   Missing 2015-06-04 2015-10-05\n59  ms432_NSA   20      20   Missing 2015-06-04 2015-10-05\n60  ms432_NSA    2      21     Never 2015-06-04 2015-10-05\n61  ms432_NSA   36      22     Never 2015-06-04 2015-10-05\n62  ms432_NSA    7      23     Never 2015-06-04 2015-10-05\n63  ms432_NSA    2      24 Sometimes 2015-06-04 2015-10-05\n64  ms432_NSA    4      25 Sometimes 2015-06-04 2015-10-05\n65  ms432_NSA    9      26 Sometimes 2015-06-04 2015-10-05\n66  ms432_NSA   48      27    Always 2015-06-04 2015-10-05\n67  ms432_NSA   11      28    Always 2015-06-04 2015-10-05\n68  ms432_NSA   99      29   Missing 2015-06-04 2015-10-05\n69  ms432_NSA    3      30   Missing 2015-06-04 2015-10-05\n70  ms432_NSA   41      31   Missing 2015-06-04 2015-10-05\n71  ms432_NSA  168      32   Missing 2015-06-04 2015-10-05\n72  ms432_NSA    2      33     Never 2015-06-04 2015-10-05\n73  ms432_NSA   23      34     Never 2015-06-04 2015-10-05\n74  ms432_NSA   22      35     Never 2015-06-04 2015-10-05\n75  ms432_NSA   38      36 Sometimes 2015-06-04 2015-10-05\n76  ms432_NSA    1      37 Sometimes 2015-06-04 2015-10-05\n77  ms432_NSA   15      38 Sometimes 2015-06-04 2015-10-05\n78  ms432_NSA  113      39 Sometimes 2015-06-04 2015-10-05\n79  ms460_NSA   48       1    Always 2016-09-27 2016-10-25\n80  ms460_NSA    9       2 Sometimes 2016-09-27 2016-10-25\n81  ms460_NSA   66       3    Always 2016-09-27 2016-10-25\n82  ms460_NSA    1       4     Never 2016-09-27 2016-10-25\n83  ms460_NSA   11       5 Sometimes 2016-09-27 2016-10-25\n84  ms460_NSA    1       6    Always 2016-09-27 2016-10-25\n85  ms460_NSA    5       7    Always 2016-09-27 2016-10-25\n86  ms460_NSA    4       8 Sometimes 2016-09-27 2016-10-25\n87  ms460_NSA   24       9    Always 2016-09-27 2016-10-25\n88  ms460_NSA    4      10 Sometimes 2016-09-27 2016-10-25\n89  ms460_NSA   29      11    Always 2016-09-27 2016-10-25\n90  ms460_NSA    1      12   Missing 2016-09-27 2016-10-25\n91  ms460_NSA    1      13     Never 2016-09-27 2016-10-25\n92  ms460_NSA    9      14 Sometimes 2016-09-27 2016-10-25\n93  ms460_NSA   10      15    Always 2016-09-27 2016-10-25\n94  ms460_NSA   14      16 Sometimes 2016-09-27 2016-10-25\n95  ms460_NSA    3      17    Always 2016-09-27 2016-10-25\n96  ms460_NSA    7      18    Always 2016-09-27 2016-10-25\n97  ms460_NSA   42      19     Never 2016-09-27 2016-10-25\n98  ms460_NSA   20      20 Sometimes 2016-09-27 2016-10-25\n99  ms460_NSA    2      21   Missing 2016-09-27 2016-10-25\n100 ms460_NSA   36      22     Never 2016-09-27 2016-10-25\n101 ms460_NSA    7      23 Sometimes 2016-09-27 2016-10-25\n102 ms460_NSA    2      24    Always 2016-09-27 2016-10-25\n103 ms460_NSA    4      25     Never 2016-09-27 2016-10-25\n104 ms460_NSA    9      26 Sometimes 2016-09-27 2016-10-25\n105 ms460_NSA   48      27    Always 2016-09-27 2016-10-25\n106 ms460_NSA   11      28 Sometimes 2016-09-27 2016-10-25\n107 ms460_NSA   99      29    Always 2016-09-27 2016-10-25\n108 ms460_NSA    3      30   Missing 2016-09-27 2016-10-25\n109 ms460_NSA   41      31     Never 2016-09-27 2016-10-25\n110 ms460_NSA  168      32 Sometimes 2016-09-27 2016-10-25\n111 ms460_NSA    2      33    Always 2016-09-27 2016-10-25\n112 ms460_NSA   23      34     Never 2016-09-27 2016-10-25\n113 ms460_NSA   22      35 Sometimes 2016-09-27 2016-10-25\n114 ms460_NSA   38      36    Always 2016-09-27 2016-10-25\n115 ms460_NSA    1      37   Missing 2016-09-27 2016-10-25\n116 ms460_NSA   15      38     Never 2016-09-27 2016-10-25\n117 ms460_NSA  113      39 Sometimes 2016-09-27 2016-10-25\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(vaccinations)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 117\nColumns: 6\n$ survey     <fct> ms153_NSA, ms153_NSA, ms153_NSA, ms153_NSA, ms153_NSA, ms15…\n$ freq       <int> 48, 9, 66, 1, 11, 1, 5, 4, 24, 4, 29, 1, 1, 9, 10, 14, 3, 7…\n$ subject    <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …\n$ response   <fct> Always, Always, Always, Always, Always, Always, Always, Alw…\n$ start_date <date> 2010-09-22, 2010-09-22, 2010-09-22, 2010-09-22, 2010-09-22…\n$ end_date   <date> 2010-10-25, 2010-10-25, 2010-10-25, 2010-10-25, 2010-10-25…\n```\n\n\n:::\n:::\n\n\n## Data Dictionary\n\nfreq: number of respondents represented in each row\n\nsubject: identifier linking respondents across surveys\n\nsurvey: survey designation from the ALP website\n\nstart_date: start date of survey\n\nend_date: end date of survey\n\nresponse: discretized probability of vaccinating for influenza\n\n##Summarising the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nskim(vaccinations)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |             |\n|:------------------------|:------------|\n|Name                     |vaccinations |\n|Number of rows           |117          |\n|Number of columns        |6            |\n|_______________________  |             |\n|Column type frequency:   |             |\n|Date                     |2            |\n|factor                   |2            |\n|numeric                  |2            |\n|________________________ |             |\n|Group variables          |None         |\n\n\n**Variable type: Date**\n\n|skim_variable | n_missing| complete_rate|min        |max        |median     | n_unique|\n|:-------------|---------:|-------------:|:----------|:----------|:----------|--------:|\n|start_date    |         0|             1|2010-09-22 |2016-09-27 |2015-06-04 |        3|\n|end_date      |         0|             1|2010-10-25 |2016-10-25 |2015-10-05 |        3|\n\n\n**Variable type: factor**\n\n|skim_variable | n_missing| complete_rate|ordered | n_unique|top_counts                         |\n|:-------------|---------:|-------------:|:-------|--------:|:----------------------------------|\n|survey        |         0|             1|FALSE   |        3|ms1: 39, ms4: 39, ms4: 39          |\n|response      |         0|             1|FALSE   |        4|Som: 37, Alw: 29, Mis: 26, Nev: 25 |\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|  mean|    sd| p0| p25| p50| p75| p100|hist  |\n|:-------------|---------:|-------------:|-----:|-----:|--:|---:|---:|---:|----:|:-----|\n|freq          |         0|             1| 24.44| 34.75|  1|   3|  10|  36|  168|▇▂▁▁▁ |\n|subject       |         0|             1| 20.00| 11.30|  1|  10|  20|  30|   39|▇▇▇▇▇ |\n\n\n:::\n:::\n\n\n## Visualising the Frequency of Responses about people's Influenza Vaccination intent\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvaccinations %>% gf_boxplot(response ~ freq, fill = ~response, alpha = 0.7) %>% \n  gf_labs(title = \"Frequency of Responses for Vaccination\") %>% \n  gf_refine(scale_fill_paletteer_d(`\"dutchmasters::pearl_earring\"`))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nComments\n\nThe graph shows that most people have opted for “Always” indicating that there is strong willingness to get vaccinated. There are quite a few people who have opted for “Sometimes” that many people are uncertain about vaccination. “Never” responses are mostly low in frequency, suggesting complete rejection of vaccination is less prevalent among people across surveys. There are also a few people who have not chosen anything suggesting indecisiveness among some, who are not sure of what they would opt for.\n\n## Visualising people's Influenza Vaccination intent across Surveys\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvaccinations %>% gf_col(freq ~ survey, fill = ~response) %>% \n  gf_refine(scale_fill_paletteer_d(`\"dutchmasters::pearl_earring\"`))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nComments\n\nThe frequency of vaccination intent differs visiby by survey, suggesting that different survey context get different responses. “Sometimes” and \"Missing\" responses are quite noticeable, suggesting many people do not have enough information about influenza vaccination.\n\n## Visualising people's Vaccination intent through subjects\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvaccinations %>% \n  \n  ggplot(aes(axis1 = subject, axis2 = survey, axis3 = response)) + \n  geom_alluvium(aes(fill = subject), alpha = 0.5) + \n  geom_stratum() + \n  geom_label(stat = \"stratum\", aes(label = after_stat(stratum))) + scale_x_discrete(limits = c(\"Subject\", \"Survey\", \"Response\")) +\n  labs(title = \"Resume quality over Etnicity\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nComments\n\nThe graph shows that the same subjects appear across multiple surveys, showing how different respondents contribute to multiple different vaccination surveys. Flows from surveys to responses are spread across all intents, indicating no single survey has one same response for all.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}