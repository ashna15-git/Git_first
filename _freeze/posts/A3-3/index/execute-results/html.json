{
  "hash": "3539c7437de40d4aff35a75b2e2b7cf8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Assignment 3-3\"\n---\n\n## Introduction\n\nI am going to examine data reguarding airlines connectivity and make a few network visualisations\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show me the Code\"}\nlibrary(tidyverse)\nlibrary(igraph) \nlibrary(tidygraph) \nlibrary(ggraph) \nlibrary(graphlayouts) \n\nlibrary(tinytable)\n```\n:::\n\n\n## Reading the Airlines Network dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\na_nodes <- read_csv(\"../Data/airlines_nodes.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 235 Columns: 8\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): Label, Code, City\ndbl (5): Id, latitude, longitude, ToFly, Visits\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\na_edges <- read_csv(\"../Data/airlines_edges.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 1297 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Type\ndbl (3): Source, Target, Weight\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n## Inspecting the Airlines Network dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(a_nodes)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 235\nColumns: 8\n$ Id        <dbl> 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…\n$ Label     <chr> \"Adams Field Airport\", \"Akron/canton Regional\", \"Albany Inte…\n$ Code      <chr> \"LIT\", \"CAK\", \"ALB\", \"CHO\", \"ABQ\", \"AEX\", \"APN\", \"ACV\", \"AVL…\n$ City      <chr> \"Little Rock, AR\", \"Akron/Canton, OH\", \"Albany\", \"Charlottes…\n$ latitude  <dbl> 34.72944, 40.91611, 42.73333, 38.13333, 35.04028, 31.32750, …\n$ longitude <dbl> -92.22444, -81.44222, -73.80000, -78.45000, -106.60917, -92.…\n$ ToFly     <dbl> 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, …\n$ Visits    <dbl> 105, 123, 129, 114, 105, 93, 135, 123, 105, 90, 132, 117, 13…\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(a_edges)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,297\nColumns: 4\n$ Source <dbl> 0, 1, 1, 2, 3, 4, 4, 5, 7, 7, 8, 9, 9, 9, 9, 10, 10, 10, 10, 10…\n$ Target <dbl> 109, 36, 61, 152, 104, 132, 168, 217, 173, 177, 53, 105, 106, 1…\n$ Type   <chr> \"Undirected\", \"Undirected\", \"Undirected\", \"Undirected\", \"Undire…\n$ Weight <dbl> 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,…\n```\n\n\n:::\n:::\n\n\n## Data Dictionary\n\nId:\nIdentifier for each airport\n\nLabel:\nName of the airport\n\nCode:\nAirport code\n\nCity:\nCity where the airport is located\n\nlatitude:\nLatitude of the airport\n\nlongitude:\nLongitude of the airport\n\nToFly:\nStatus indicator\n\nVisits:\nMeasure of people's activity in airports\n\nSource:\nOrigin airport ID\n\nTarget:\nDestination airport ID\n\nType:\nRoute type\n\nWeight:\nFrequency of flights\n\n## Data Munging of the dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_nodes <- a_nodes %>% \n  mutate(\n    across(where(is.character), as.factor)\n  ) %>% \n  mutate(\n    ToFly = as.factor(ToFly)\n  )\n\nair_edges <- a_edges %>% \n  mutate(\n    Source = as.factor(Source),\n    Target = as.factor(Target),\n    Type = as.factor(Type)\n  )\n```\n:::\n\n\n## Making a Graph Object for the Airlines Network dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_graph <- tidygraph::tbl_graph(nodes = air_nodes,\n                                 edges = air_edges,\n                                 directed = TRUE)\nair_graph\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tbl_graph: 235 nodes and 1297 edges\n#\n# A directed simple graph with 1 component\n#\n# Node Data: 235 × 8 (active)\n      Id Label                       Code  City  latitude longitude ToFly Visits\n   <dbl> <fct>                       <fct> <fct>    <dbl>     <dbl> <fct>  <dbl>\n 1     0 Adams Field Airport         LIT   Litt…     34.7     -92.2 0        105\n 2     1 Akron/canton Regional       CAK   Akro…     40.9     -81.4 0        123\n 3     2 Albany International        ALB   Alba…     42.7     -73.8 0        129\n 4     3 Albemarle                   CHO   Char…     38.1     -78.4 1        114\n 5     4 Albuquerque International   ABQ   Albu…     35.0    -107.  0        105\n 6     5 Alexandria International    AEX   Alex…     31.3     -92.5 0         93\n 7     6 Alpena County Regional      APN   Alpe…     45.1     -83.6 0        135\n 8     7 Arcata                      ACV   Arca…     41.0    -124.  0        123\n 9     8 Asheville Regional Airport  AVL   Flet…     35.4     -82.5 0        105\n10     9 Austin-bergstrom Internati… AUS   Aust…     30.2     -97.7 1         90\n# ℹ 225 more rows\n#\n# Edge Data: 1,297 × 4\n   from    to Type       Weight\n  <int> <int> <fct>       <dbl>\n1     1   110 Undirected     10\n2     2    37 Undirected     10\n3     2    62 Undirected     10\n# ℹ 1,294 more rows\n```\n\n\n:::\n:::\n\nComments\n\nThis is done to structure the raw Airlines Network dataset to a structured dataset for the network visualisations\n\n## Major Airports and connected Smaller Ariports\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_graph %>% \n  \n  activate(nodes) %>% \n  mutate(degree = centrality_degree()) %>%\n  \n  ggraph(layout = \"fr\") +\n  geom_edge_link0(alpha = 0.15)+\n  geom_node_point(aes(fill = ToFly, size = degree), shape = 21)+\n  scale_fill_brewer(palette = \"Pastel1\") \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\nComments\n\nThe few airports, that is the points in the middle, are very important since they have a lot of connections (degree of nodes). This suggests that the airline system depend on them. The smaller points are the small airports with only a few to very few connections and they are dependent on the major airports in the middle.\n\n## Important Flight Routes between the Airports\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_graph %>% \n  \n  activate(edges) %>% \n  mutate(between = centrality_edge_betweenness()) %>% \n  \n  activate(nodes) %>% \n  mutate(degree = centrality_degree()) %>% \n  \n  ggraph(layout = \"fr\") +\n  geom_edge_link0(aes(linewidth = between, colour = between)) +\n  geom_node_point(aes(size = degree),colour = \"black\", fill = \"pink\", shape = 21) +\n  \n  theme(legend.text  = element_text(size = 5),\n        legend.title = element_text(size = 6),\n        legend.key.size = unit(0.4, \"cm\"),\n        legend.position =\"bottom\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: The `trans` argument of `continuous_scale()` is deprecated as of ggplot2 3.5.0.\nℹ Please use the `transform` argument instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\nComments\n\nOnly a few routes are very important since only a few routes are represented by thick and lighter blue lines. The other routes are not very important as they are represented by thin and darker blue lines. This means only a small number of routes are used over and over again to connect to different airports in the network. The routes which have high betweeness between them, that is the thicker, lighter blue routes, connect airports to each other, making them extremely important. If any one of these airports are affected, it would in turn affect a lot of dependent airports. \n\n## Busy Airports and their Connections\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_graph %>% \n  \n   activate(nodes) %>% \n  mutate(degree = centrality_degree()) %>%\n  \n  ggraph(layout = \"kk\") +\n  geom_edge_link0(alpha = 0.15) +\n  geom_node_point(aes(fill = Visits, size = degree), shape = 21) +\n  scale_fill_viridis_c()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\nComments\n\nThe most visited airports are scattered all across, the bigger and smaller points (airports) both are visited a lot. This implies that the number of connections of the airports (size of points) does not affect the activity of people in that airport. There are some major airports which are less visited than the smaller airports suggesting that the number of flights do not depend on the number of connections.\n\n## Flight routes and their types \n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_graph %>%\n  \n   activate(edges) %>% \n  mutate(between = centrality_edge_betweenness()) %>% \n  \n  ggraph(layout = \"kk\") +\n  geom_edge_link0(aes(linewidth = Type, colour = between)) +\n  geom_node_point(size = 3, colour = \"black\", fill = \"pink\", shape = 21)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using edge_width for a discrete variable is not advised.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\nComments\n\nThis network shows that all flight routes are undirected. It implies that the if the airports have connections between them, it has both to and fro flights between them.\n\n## Airports and their flight frequency\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_graph %>% \n  \n  activate(nodes) %>% \n  mutate(degree = centrality_degree()) %>% \n  \n  ggraph(layout = \"linear\", circular = TRUE) +\n  geom_edge_link0(aes(edge_colour =  Weight)) +\n  geom_node_point(aes(colour = degree), size = 4) +\n  scale_edge_color_distiller(palette = \"YlOrRd\") +\n  scale_colour_viridis_c()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\nComments\nThis shows how frequent the flights are between the airports. Most flights' frequency is below 250. Only a select few flights have more than 250 in terms of frequency which are represented in a lighter red colour. Also shows how it's not necessary for only major airports to have more flight frequency. Some of the smaller airports (points coloured in blues and purples) have more flight frequency than the major airports (points coloured in yellows and greens).\n\n\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}