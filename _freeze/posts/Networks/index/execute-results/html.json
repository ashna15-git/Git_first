{
  "hash": "4fc4f157c624f0d20562a6a0822db25a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Intro to Networks\"\n---\n\n## Nodes/ vertices (represented through circles, shapes) are the points and Arcs are the lines- represented through lines and also loop at the same point), path- direction of the arcs, circuit, starts and finishes at the same node- analysis is fastest route\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show me the Code\"}\nlibrary(tidyverse)\nlibrary(igraph) # Network Analysis Library (Handle data and Viz)\nlibrary(tidygraph) # For Network \"Manipulation\"\nlibrary(ggraph) # For Network Visualization\nlibrary(graphlayouts) # For Network Visualization, more layouts and themes\nlibrary(visNetwork) # For Interactive Network Visualization\nlibrary(igraphdata) # For \"Network\" Datasets\nlibrary(sand) # Statistical Analysis of Networks Data\n\nlibrary(tinytable) # Elegant Tables for our data\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot2::theme_set(theme_bw())\n```\n:::\n\n\n\n\n## Edge List- lines can be colour qual, width quant, and shpe (dotted) for qual\n\n## Read the Network Datasets\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_nodes <- read_csv(\"../Data/grey_nodes.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 54 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): name, sex, race, position, sign\ndbl (2): birthyear, season\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nmy_edges <- read_csv(\"../Data/grey_edges.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 57 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): from, to, type\ndbl (1): weight\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n## Inspecting the Network Dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(my_nodes)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 54\nColumns: 7\n$ name      <chr> \"Addison Montgomery\", \"Adele Webber\", \"Teddy Altman\", \"Ameli…\n$ sex       <chr> \"F\", \"F\", \"F\", \"F\", \"F\", \"F\", \"M\", \"F\", \"M\", \"M\", \"F\", \"M\", …\n$ race      <chr> \"White\", \"Black\", \"White\", \"White\", \"White\", \"White\", \"Black…\n$ birthyear <dbl> 1967, 1949, 1969, 1981, 1976, 1975, 1981, 1969, 1972, 1972, …\n$ position  <chr> \"Attending\", \"Non-Staff\", \"Attending\", \"Attending\", \"Attendi…\n$ season    <dbl> 1, 2, 6, 7, 5, 3, 6, 1, 6, 7, 8, 3, 2, 1, 1, 2, 1, 2, 1, 1, …\n$ sign      <chr> \"Libra\", \"Leo\", \"Pisces\", \"Libra\", \"Leo\", \"Gemini\", \"Leo\", \"…\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(my_edges)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 57\nColumns: 4\n$ from   <chr> \"Leah Murphy\", \"Leah Murphy\", \"Lauren Boswell\", \"Arizona Robbin…\n$ to     <chr> \"Arizona Robbins\", \"Alex Karev\", \"Arizona Robbins\", \"Callie Tor…\n$ weight <dbl> 2, 4, 1, 1, 6, 12, 5, 2, 3, 4, 1, 7, 3, 4, 6, 2, 1, 1, 1, 1, 1,…\n$ type   <chr> \"friends\", \"benefits\", \"friends\", \"friends\", \"friends\", \"benefi…\n```\n\n\n:::\n:::\n\n\n## Data Munging\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnodes_modified <- my_nodes %>% \n  mutate(\n    across(where(is.character), as.factor)) %>% \n  mutate(\n    season = as.factor(season)\n    )\nnodes_modified   \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 54 × 7\n   name               sex   race  birthyear position  season sign    \n   <fct>              <fct> <fct>     <dbl> <fct>     <fct>  <fct>   \n 1 Addison Montgomery F     White      1967 Attending 1      Libra   \n 2 Adele Webber       F     Black      1949 Non-Staff 2      Leo     \n 3 Teddy Altman       F     White      1969 Attending 6      Pisces  \n 4 Amelia Shepherd    F     White      1981 Attending 7      Libra   \n 5 Arizona Robbins    F     White      1976 Attending 5      Leo     \n 6 Rebecca Pope       F     White      1975 Non-Staff 3      Gemini  \n 7 Jackson Avery      M     Black      1981 Resident  6      Leo     \n 8 Miranda Bailey     F     Black      1969 Attending 1      Virgo   \n 9 Ben Warren         M     Black      1972 Other     6      Aquarius\n10 Henry Burton       M     White      1972 Non-Staff 7      Cancer  \n# ℹ 44 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\nedges_modified <- my_edges %>% \n  mutate(\n    across(where(is.character), as.factor))\n```\n:::\n\n\n\n## Making a Graph Object first\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph <- tidygraph::tbl_graph(nodes = my_nodes,\n                                 edges = my_edges,\n                                 directed = TRUE)\nmy_graph\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tbl_graph: 54 nodes and 57 edges\n#\n# A directed acyclic simple graph with 4 components\n#\n# Node Data: 54 × 7 (active)\n   name               sex   race  birthyear position  season sign    \n   <chr>              <chr> <chr>     <dbl> <chr>      <dbl> <chr>   \n 1 Addison Montgomery F     White      1967 Attending      1 Libra   \n 2 Adele Webber       F     Black      1949 Non-Staff      2 Leo     \n 3 Teddy Altman       F     White      1969 Attending      6 Pisces  \n 4 Amelia Shepherd    F     White      1981 Attending      7 Libra   \n 5 Arizona Robbins    F     White      1976 Attending      5 Leo     \n 6 Rebecca Pope       F     White      1975 Non-Staff      3 Gemini  \n 7 Jackson Avery      M     Black      1981 Resident       6 Leo     \n 8 Miranda Bailey     F     Black      1969 Attending      1 Virgo   \n 9 Ben Warren         M     Black      1972 Other          6 Aquarius\n10 Henry Burton       M     White      1972 Non-Staff      7 Cancer  \n# ℹ 44 more rows\n#\n# Edge Data: 57 × 4\n   from    to weight type    \n  <int> <int>  <dbl> <chr>   \n1    47     5      2 friends \n2    47    21      4 benefits\n3    46     5      1 friends \n# ℹ 54 more rows\n```\n\n\n:::\n:::\n\n\n## Can we plot this\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% ggraph::autograph()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Dressing up the nodes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% \n  ggraph()+\n  geom_node_point(aes(fill = race), size = 4, shape = 25)+\n  geom_edge_link0()+\n  scale_fill_brewer(palette = \"Spectral\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nUsing \"sugiyama\" as default layout\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## Trying other layouts, some are random: like \"fr\" (Fruchterman-Rheingold), \"kk\" kamada-kawai\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% \n  ggraph(layout = \"fr\")+\n  geom_node_point(aes(fill = race), size = 4, shape = 25)+\n  geom_edge_link0()+\n  scale_fill_brewer(palette = \"Spectral\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% \n  ggraph(layout = \"kk\")+\n  geom_node_point(aes(fill = race), size = 4, shape = 25)+\n  geom_edge_link0()+\n  scale_fill_brewer(palette = \"Spectral\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% \n  ggraph(layout = \"linear\", circular= TRUE)+\n  geom_node_point(aes(fill = race), size = 4, shape = 25)+\n  geom_edge_link0()+\n  scale_fill_brewer(palette = \"Spectral\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% \n  ggraph(layout = \"linear\", circular= TRUE)+\n  geom_node_point(aes(fill = race), size = 4, shape = 25)+\n  geom_node_text(aes(label = name), size = 4, repel = T)+ ## labels dont overlap (repel)\n  scale_fill_brewer(palette = \"Spectral\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: ggrepel: 1 unlabeled data points (too many overlaps). Consider\nincreasing max.overlaps\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n## Plotting the degree of connections\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% \n  activate(nodes) %>% \n  mutate(degree = centrality_degree(mode = c(\"in\"))) %>% \n  filter(degree> 0)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tbl_graph: 37 nodes and 37 edges\n#\n# A directed acyclic simple graph with 5 components\n#\n# Node Data: 37 × 8 (active)\n   name               sex   race  birthyear position  season sign      degree\n   <chr>              <chr> <chr>     <dbl> <chr>      <dbl> <chr>      <dbl>\n 1 Addison Montgomery F     White      1967 Attending      1 Libra          1\n 2 Adele Webber       F     Black      1949 Non-Staff      2 Leo            1\n 3 Teddy Altman       F     White      1969 Attending      6 Pisces         2\n 4 Arizona Robbins    F     White      1976 Attending      5 Leo            2\n 5 Rebecca Pope       F     White      1975 Non-Staff      3 Gemini         1\n 6 Jackson Avery      M     Black      1981 Resident       6 Leo            1\n 7 Miranda Bailey     F     Black      1969 Attending      1 Virgo          1\n 8 Henry Burton       M     White      1972 Non-Staff      7 Cancer         1\n 9 Catherine Avery    F     Other      1950 Attending      8 Capricorn      1\n10 Derek Sheperd      M     White      1966 Attending      1 Capricorn      1\n# ℹ 27 more rows\n#\n# Edge Data: 37 × 4\n   from    to weight type    \n  <int> <int>  <dbl> <chr>   \n1     4    28      1 friends \n2    28    13      6 friends \n3    28    15     12 benefits\n# ℹ 34 more rows\n```\n\n\n:::\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% \n  activate(nodes) %>% \n  mutate(degree = centrality_degree(mode = c(\"in\"))) %>% \n  filter(degree> 0) %>% \n\nggraph(layout = \"fr\")+\n  \n  geom_edge_link0()+\n  geom_node_text(aes(label = name), size = 4, repel = T)+\n  geom_node_point(aes(size = degree, colour = race))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n## degree is integer and betweennees is decimal\n\n## node with quant city with population- tidygraph and ggraph is tidyverse and ggformula for networks\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_graph %>% \n  \n  ## Busiest node\n  activate(nodes) %>% \n  mutate(degree = centrality_degree(mode = c(\"in\"))) %>% \n  filter(degree> 0) %>% \n  \n  ## Busiest edge\n  activate(edges) %>% \n  mutate(between = centrality_edge_betweenness()) %>% \n\nggraph(layout = \"fr\")+\n  \n  geom_edge_link0(aes(linewidth = between))+\n  geom_node_text(aes(label = name), size = 4, repel = T)+\n  geom_node_point(aes(size = degree, colour = race))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: The `trans` argument of `continuous_scale()` is deprecated as of ggplot2 3.5.0.\nℹ Please use the `transform` argument instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\ncolour a3 based on cuisine",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}