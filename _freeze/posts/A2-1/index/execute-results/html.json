{
  "hash": "45da49e309281aaf0e7ce433b6701d1f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Assignment 2-1\"\nformat: html\neditor: visual\n---\n\n## Introduction\nI am examining a dataset reguarding schools in the different counties in America.\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#|label: setup\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.6\n✔ forcats   1.0.1     ✔ stringr   1.6.0\n✔ ggplot2   4.0.1     ✔ tibble    3.3.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.2\n✔ purrr     1.2.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(skimr)\nlibrary(ggformula)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: scales\n\nAttaching package: 'scales'\n\nThe following object is masked from 'package:purrr':\n\n    discard\n\nThe following object is masked from 'package:readr':\n\n    col_factor\n\nLoading required package: ggiraph\nLoading required package: ggridges\n\nNew to ggformula?  Try the tutorials: \n\tlearnr::run_tutorial(\"introduction\", package = \"ggformula\")\n\tlearnr::run_tutorial(\"refining\", package = \"ggformula\")\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(vcd)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: grid\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(vcdExtra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: gnm\nRegistered S3 method overwritten by 'vcdExtra':\n  method      from\n  print.Kappa vcd \n\nAttaching package: 'vcdExtra'\n\nThe following object is masked from 'package:vcd':\n\n    woolf_test\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(vcdExtra)\nlibrary(openintro)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: airports\nLoading required package: cherryblossom\nLoading required package: usdata\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(resampledata)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'resampledata'\n\nThe following object is masked from 'package:vcdExtra':\n\n    TV\n\nThe following object is masked from 'package:datasets':\n\n    Titanic\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggalluvial)\nlibrary(RColorBrewer)\nlibrary(paletteer)\n```\n:::\n\n\n## Loading and Inspecting Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nschool_exp <- read_csv(\"../Data/CASchools.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 420 Columns: 15\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (3): school, county, grades\ndbl (12): rownames, district, students, teachers, calworks, lunch, computer,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(school_exp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 420\nColumns: 15\n$ rownames    <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…\n$ district    <dbl> 75119, 61499, 61549, 61457, 61523, 62042, 68536, 63834, 62…\n$ school      <chr> \"Sunol Glen Unified\", \"Manzanita Elementary\", \"Thermalito …\n$ county      <chr> \"Alameda\", \"Butte\", \"Butte\", \"Butte\", \"Butte\", \"Fresno\", \"…\n$ grades      <chr> \"KK-08\", \"KK-08\", \"KK-08\", \"KK-08\", \"KK-08\", \"KK-08\", \"KK-…\n$ students    <dbl> 195, 240, 1550, 243, 1335, 137, 195, 888, 379, 2247, 446, …\n$ teachers    <dbl> 10.90, 11.15, 82.90, 14.00, 71.50, 6.40, 10.00, 42.50, 19.…\n$ calworks    <dbl> 0.5102, 15.4167, 55.0323, 36.4754, 33.1086, 12.3188, 12.90…\n$ lunch       <dbl> 2.0408, 47.9167, 76.3226, 77.0492, 78.4270, 86.9565, 94.62…\n$ computer    <dbl> 67, 101, 169, 85, 171, 25, 28, 66, 35, 0, 86, 56, 25, 0, 3…\n$ expenditure <dbl> 6384.911, 5099.381, 5501.955, 7101.831, 5235.988, 5580.147…\n$ income      <dbl> 22.690001, 9.824000, 8.978000, 8.978000, 9.080333, 10.4150…\n$ english     <dbl> 0.000000, 4.583333, 30.000002, 0.000000, 13.857677, 12.408…\n$ read        <dbl> 691.6, 660.5, 636.3, 651.9, 641.8, 605.7, 604.5, 605.5, 60…\n$ math        <dbl> 690.0, 661.9, 650.9, 643.5, 639.9, 605.4, 609.0, 612.5, 61…\n```\n\n\n:::\n:::\n\n\n## Data Dictionary\n\ndistrict: District code.\n\nschool: School name.\n\ncounty: indicating county.\n\ngrades: indicating grade span of district.\n\nstudents: Total enrollment.\n\nteachers: Number of teachers.\n\ncalworks: Percent qualifying for CalWorks (income assistance).\n\nlunch: Percent qualifying for reduced-price lunch.\n\ncomputer: Number of computers.\n\nexpenditure: Expenditure per student.\n\nincome: District average income (in USD 1,000).\n\nenglish: Percent of English learners.\n\nread: Average reading score.\n\nmath: Average math score.\n\n## Summarising the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nskimr::skim(school_exp)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |           |\n|:------------------------|:----------|\n|Name                     |school_exp |\n|Number of rows           |420        |\n|Number of columns        |15         |\n|_______________________  |           |\n|Column type frequency:   |           |\n|character                |3          |\n|numeric                  |12         |\n|________________________ |           |\n|Group variables          |None       |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|school        |         0|             1|  14|  39|     0|      409|          0|\n|county        |         0|             1|   4|  15|     0|       45|          0|\n|grades        |         0|             1|   5|   5|     0|        2|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|     mean|      sd|       p0|      p25|      p50|      p75|     p100|hist  |\n|:-------------|---------:|-------------:|--------:|-------:|--------:|--------:|--------:|--------:|--------:|:-----|\n|rownames      |         0|             1|   210.50|  121.39|     1.00|   105.75|   210.50|   315.25|   420.00|▇▇▇▇▇ |\n|district      |         0|             1| 67472.81| 3466.99| 61382.00| 64307.75| 67760.50| 70419.00| 75440.00|▇▆▇▇▁ |\n|students      |         0|             1|  2628.79| 3913.10|    81.00|   379.00|   950.50|  3008.00| 27176.00|▇▁▁▁▁ |\n|teachers      |         0|             1|   129.07|  187.91|     4.85|    19.66|    48.56|   146.35|  1429.00|▇▁▁▁▁ |\n|calworks      |         0|             1|    13.25|   11.45|     0.00|     4.40|    10.52|    18.98|    78.99|▇▃▁▁▁ |\n|lunch         |         0|             1|    44.71|   27.12|     0.00|    23.28|    41.75|    66.86|   100.00|▆▇▆▅▅ |\n|computer      |         0|             1|   303.38|  441.34|     0.00|    46.00|   117.50|   375.25|  3324.00|▇▁▁▁▁ |\n|expenditure   |         0|             1|  5312.41|  633.94|  3926.07|  4906.18|  5214.52|  5601.40|  7711.51|▂▇▃▁▁ |\n|income        |         0|             1|    15.32|    7.23|     5.34|    10.64|    13.73|    17.63|    55.33|▇▃▁▁▁ |\n|english       |         0|             1|    15.77|   18.29|     0.00|     1.94|     8.78|    22.97|    85.54|▇▂▁▁▁ |\n|read          |         0|             1|   654.97|   20.11|   604.50|   640.40|   655.75|   668.73|   704.00|▂▆▇▆▂ |\n|math          |         0|             1|   653.34|   18.75|   605.40|   639.38|   652.45|   665.85|   709.50|▁▆▇▃▁ |\n\n\n:::\n:::\n\n\n## Data Munging\n\n\n::: {.cell}\n\n```{.r .cell-code}\nschool_modified <- school_exp %>% \n  mutate(\n    school = as_factor(school),\n    county = as_factor(county),\n    grades = as_factor(grades)\n  )\nglimpse(school_modified)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 420\nColumns: 15\n$ rownames    <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…\n$ district    <dbl> 75119, 61499, 61549, 61457, 61523, 62042, 68536, 63834, 62…\n$ school      <fct> Sunol Glen Unified, Manzanita Elementary, Thermalito Union…\n$ county      <fct> Alameda, Butte, Butte, Butte, Butte, Fresno, San Joaquin, …\n$ grades      <fct> KK-08, KK-08, KK-08, KK-08, KK-08, KK-08, KK-08, KK-08, KK…\n$ students    <dbl> 195, 240, 1550, 243, 1335, 137, 195, 888, 379, 2247, 446, …\n$ teachers    <dbl> 10.90, 11.15, 82.90, 14.00, 71.50, 6.40, 10.00, 42.50, 19.…\n$ calworks    <dbl> 0.5102, 15.4167, 55.0323, 36.4754, 33.1086, 12.3188, 12.90…\n$ lunch       <dbl> 2.0408, 47.9167, 76.3226, 77.0492, 78.4270, 86.9565, 94.62…\n$ computer    <dbl> 67, 101, 169, 85, 171, 25, 28, 66, 35, 0, 86, 56, 25, 0, 3…\n$ expenditure <dbl> 6384.911, 5099.381, 5501.955, 7101.831, 5235.988, 5580.147…\n$ income      <dbl> 22.690001, 9.824000, 8.978000, 8.978000, 9.080333, 10.4150…\n$ english     <dbl> 0.000000, 4.583333, 30.000002, 0.000000, 13.857677, 12.408…\n$ read        <dbl> 691.6, 660.5, 636.3, 651.9, 641.8, 605.7, 604.5, 605.5, 60…\n$ math        <dbl> 690.0, 661.9, 650.9, 643.5, 639.9, 605.4, 609.0, 612.5, 61…\n```\n\n\n:::\n:::\n\n\n## Visualising the Distribution of School Expenditure by Grade\n\n\n::: {.cell}\n\n```{.r .cell-code}\nschool_modified %>% gf_histogram(~expenditure,color = \"black\", fill = ~grades) %>% \n  gf_labs(\n    title = \"Distribution of School Expenditure by Grade\",\n    x = \"Expenditure\") %>% \n  gf_annotate(geom = \"rect\", color= \"black\", fill= \"white\", alpha=0.3,\n              xmin = 4600, xmax = 5900, ymin = 0,  ymax = 50) %>% \n  gf_annotate(geom=\"text\", x = 6600, y = 50, label = \"Most schools expend around 4,800–5,800 dollars\") %>% \n  gf_annotate(geom = \"curve\", x = 6500, y = 47,\n              xend = 6000, yend = 30, linewidth = 1,\n              curvature = -0.5,\n              arrow= arrow(length = unit(0.5, \"cm\")))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\nComments\n\nThe graph shows that the schools expend higher amounts on the higher grade range (KK-08) compared to the lower grade range (KK-06). It also shows that most schools spend around 4800 to 5800 dollars for both the grade ranges. Only a few schools expend higher amounts (above 5800 dollars approxiamtely) and they are mostly with the higher grade range.\n\n## Visualising ratio of Students to Teachers and impact on Math Scores\n\n\n::: {.cell}\n\n```{.r .cell-code}\nschool_modified %>% gf_point(teachers ~ students, fill = ~ math, shape =21, size=3) %>%\n  gf_refine(scale_fill_continuous(palette = \"PuRd\")) %>% \n  gf_labs(\n    title = \"Students to Teachers (Colored by Math Score)\",\n    x = \"Number of Students\",\n    y = \"Number of Teachers\")%>% \n  gf_annotate(geom = \"rect\", color= \"black\", fill= \"white\", alpha=0.3,\n              xmin = 0, xmax = 7000, ymin = 0,  ymax = 500) %>% \n  gf_annotate(geom=\"text\", x = 10000, y = 1000, label = \"Students with highest math scores are clustered here\") %>% \n  gf_annotate(geom = \"curve\", x = 3500, y =900,\n              xend = 3500, yend = 550, linewidth = 1,\n              curvature = 0.5,\n              arrow= arrow(length = unit(0.5, \"cm\")))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\nschool_modified %>% gf_point(students ~ teachers, color = ~ math) %>% \n  gf_lm() %>% \n  gf_labs(\n    title = \"Students to Teachers (Colored by Math Score)\",\n    x = \"Number of Students\",\n    y = \"Number of Teachers\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: The following aesthetics were dropped during statistical transformation:\ncolour.\nℹ This can happen when ggplot fails to infer the correct grouping structure in\n  the data.\nℹ Did you forget to specify a `group` aesthetic or to convert a numerical\n  variable into a factor?\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n:::\n\nComments\n\nThe graph shows that the student to teacher ratio is consistent, there is an increase in number of teachers with the number of students in the carious schools. The math scores are not necessarily affected by the no of students (or teachers) since high and low math scores are noticed in both cases.\n\n## Visualising if more Computers impact Read scores\n\n::: {.cell}\n\n```{.r .cell-code}\nschool_modified %>% gf_point(read ~ computer, fill = ~ expenditure, shape =21, size=3) %>%\n  gf_refine(scale_fill_continuous(palette = \"PuRd\")) %>%\n  gf_labs(\n    title = \"No of Computers to Read Score (Colour = Expenditure)\",\n    x = \"Number of Computers\",\n    y = \"Read Score\")%>% \n   \n  gf_annotate(geom = \"rect\", color= \"black\", fill= \"white\", alpha=0.3,\n              xmin = 0, xmax = 200, ymin = 600, ymax = 705) %>% \n  gf_annotate(geom=\"text\", x = 1500, y = 710,\n  label = \"Wide variation in reading scores despite low computer availability\") %>% gf_annotate(geom = \"curve\", x = 1000, y =705,\n              xend = 200, yend = 670, linewidth = 1,\n              curvature = -0.5,\n              arrow= arrow(length = unit(0.5, \"cm\"))) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n\n```{.r .cell-code}\nschool_modified %>% gf_point(read ~ computer, color = ~ expenditure) %>%\n  gf_lm() %>% \n  gf_labs(\n    title = \"No of Computers to Read Score (Colour = Expenditure)\",\n    x = \"Number of Computers\",\n    y = \"Read Score\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: The following aesthetics were dropped during statistical transformation:\ncolour.\nℹ This can happen when ggplot fails to infer the correct grouping structure in\n  the data.\nℹ Did you forget to specify a `group` aesthetic or to convert a numerical\n  variable into a factor?\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-2.png){width=672}\n:::\n:::\n\nComments\n\nThe graph shows that there is a slight negative relationship between the number of computers and reading scores of students. Schools with very high computer counts do not show better reading scores and are mostly below the average. Although schools that expend more show students with better reading scores.\n\n## Visualising comparison of students' reading and math scores\n\n\n::: {.cell}\n\n```{.r .cell-code}\nschool_modified %>% gf_density(~ read, fill = \"blue\", color = \"black\") %>%\n  gf_density(~ math, fill = \"firebrick\", color = \"black\") %>%\n  gf_labs(\n    title = \"Distribution of Read and Math Scores\",\n    x = \"Scores\") %>% \n  gf_annotate(geom = \"rect\", color= \"black\", fill= \"white\", alpha=0.3,\n              xmin = 640, xmax = 675, ymin = 0.017, ymax = 0.020) %>% \n  gf_annotate(geom=\"text\", x = 680, y = 0.012,\n  label = \"Math scores slightly right, indicating higher scores\") %>% \n  gf_annotate(geom = \"curve\", x = 680, y =0.013,\n              xend = 676, yend = 0.018, linewidth = 1,\n              curvature = 0.5,\n              arrow= arrow(length = unit(0.5, \"cm\"))) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\nComments\n\nThe graph shows that the reading and math score distributions are similar indicating that schools performing well in one subject also perform similarly in the other.\n\n## Visualising Math scores of students by County\n\n\n::: {.cell}\n\n```{.r .cell-code}\nschool_modified %>%  gf_density_ridges(county~ math, fill = ~ county) %>%\n  gf_labs(\n    title = \"Math Scores of Students by County\",\n    x = \"Math Score\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nPicking joint bandwidth of 6.41\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\nComments\n\nThe graph shows that math score distributions across counties are similar, indicating that geographical region does not really impact the scores of students.",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}